<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Diego Crisafulli â€“ Portfolio</title>
    <!-- Link to the stylesheet for styling -->
    <link rel="stylesheet" href="style.css">
    <!-- Chat config: define window.CHAT_API_BASE before app code runs -->
    <script src="./chat-config.js"></script>
    <!-- Include React and Reactâ€‘DOM from a CDN -->
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <!-- Include modern Babel Standalone (v7) to transpile JSX in-browser -->
    <script crossorigin src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
        <!-- Surface runtime errors to the page for easier debugging on static hosting -->
        <script>
            window.addEventListener('error', function (e) {
                try {
                    var pre = document.createElement('pre');
                    pre.style.background = '#300';
                    pre.style.color = '#fff';
                    pre.style.padding = '8px';
                    pre.style.margin = '0';
                    pre.style.whiteSpace = 'pre-wrap';
                    pre.textContent = 'Error: ' + (e.error && e.error.stack || e.message || e.toString());
                    document.body.insertBefore(pre, document.body.firstChild);
                } catch (_) {}
            });
        </script>
</head>
<body>
    <!-- Root element where our React app will mount -->
    <div id="root"></div>

    <!-- React application code (Babel will transpile JSX) -->
    <script type="text/babel" data-presets="env,react">
        /*
         * Top navigation bar component. Renders links that scroll to sections
         * within the page. The component sticks to the top of the viewport
         * so it remains visible when scrolling.
         */
        function NavBar(props) {
            // Local state for mobile menu toggling
            const [menuOpen, setMenuOpen] = React.useState(false);
            // Close the menu when a link is clicked
            const handleLinkClick = () => setMenuOpen(false);
            return (
                <nav className={`navbar ${menuOpen ? 'active' : ''}`}>                    
                    <div className="navâ€‘logo">Diego Crisafulli</div>
                    {/* Hamburger menu button for small screens */}
                    <button
                        className="menuâ€‘toggle"
                        aria-label="Toggle navigation"
                        onClick={() => setMenuOpen((prev) => !prev)}
                    >
                        {menuOpen ? '\u00d7' : '\u2630'}
                    </button>
                    <ul className="navâ€‘links" onClick={handleLinkClick}>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#about">About</a></li>
                        <li><a href="#skills">Skills</a></li>
                        <li><a href="#experience">Experience</a></li>
                        <li><a href="#projects">Projects</a></li>
                        <li><a href="#education">Education</a></li>
                        <li><a href="#contact">Contact</a></li>
                    </ul>
                    {/* Dark mode toggle button */}
                    <button className="darkâ€‘modeâ€‘toggle" onClick={props.toggleDarkMode}>
                        {props.darkMode ? 'Light Mode' : 'Dark Mode'}
                    </button>
                </nav>
            );
        }

        /*
         * Section component used for layout. Accepts an id, title and children.
         * Helps to keep the markup for each section clean and consistent.
         */
        function Section({ id, title, children }) {
            return (
                <section id={id} className="section">
                    <h2>{title}</h2>
                    <div className="sectionâ€‘content">{children}</div>
                </section>
            );
        }

                // Lightweight Snake mini-game rendered on a Canvas.
                        function GameHero() {
                    const canvasRef = React.useRef(null);
                    const [running, setRunning] = React.useState(false);
                    const [score, setScore] = React.useState(0);
                            const [best, setBest] = React.useState(() => {
                                const v = parseInt(localStorage.getItem('snakeBest') || '0', 10);
                                return isNaN(v) ? 0 : v;
                            });
                    const [started, setStarted] = React.useState(false);
                    const [gameOver, setGameOver] = React.useState(false);
                    const dirRef = React.useRef({ x: 1, y: 0 });
                    const snakeRef = React.useRef([{ x: 8, y: 12 }]);
                    const appleRef = React.useRef({ x: 14, y: 12 });
                    const lastTimeRef = React.useRef(0);
                    const accRef = React.useRef(0);
                    const grid = 20; // 20x15 grid on 400x300 canvas
                    const stepMs = 120; // speed
                            const touchRef = React.useRef(null);

                    const reset = () => {
                        snakeRef.current = [{ x: 8, y: 12 }];
                        dirRef.current = { x: 1, y: 0 };
                        appleRef.current = { x: Math.floor(Math.random()*grid), y: Math.floor(Math.random()*15) };
                        setScore(0);
                    };

                    React.useEffect(() => {
                        reset();
                        const onKey = (e) => {
                            const k = e.key;
                            const d = dirRef.current;
                            if (k === ' ' || k === 'Spacebar') {
                                e.preventDefault();
                                if (!started) { setStarted(true); setGameOver(false); setRunning(true); return; }
                                setRunning((r) => !r);
                                return;
                            }
                            if (k === 'ArrowUp' || k === 'w') { if (d.y === 0) dirRef.current = { x: 0, y: -1 }; }
                            else if (k === 'ArrowDown' || k === 's') { if (d.y === 0) dirRef.current = { x: 0, y: 1 }; }
                            else if (k === 'ArrowLeft' || k === 'a') { if (d.x === 0) dirRef.current = { x: -1, y: 0 }; }
                            else if (k === 'ArrowRight' || k === 'd') { if (d.x === 0) dirRef.current = { x: 1, y: 0 }; }
                        };
                        window.addEventListener('keydown', onKey);
                                    const onVis = () => { if (document.hidden) setRunning(false); };
                                    document.addEventListener('visibilitychange', onVis);
                                    return () => {
                                        window.removeEventListener('keydown', onKey);
                                        document.removeEventListener('visibilitychange', onVis);
                                    };
                    }, []);

                    React.useEffect(() => {
                        let rafId;
                        const loop = (t) => {
                            if (!running) { rafId = requestAnimationFrame(loop); return; }
                            const canvas = canvasRef.current;
                            if (!canvas) return;
                            const ctx = canvas.getContext('2d');
                            const w = canvas.width, h = canvas.height;
                            // fixed timestep
                            const dt = t - (lastTimeRef.current || t);
                            lastTimeRef.current = t;
                            accRef.current += dt;
                            if (accRef.current >= stepMs) {
                                accRef.current = 0;
                                // advance
                                const snake = [...snakeRef.current];
                                const head = { x: snake[0].x + dirRef.current.x, y: snake[0].y + dirRef.current.y };
                                // wrap
                                head.x = (head.x + grid) % grid;
                                head.y = (head.y + 15) % 15;
                                // self collision
                                                if (snake.some((s) => s.x === head.x && s.y === head.y)) {
                                                    setRunning(false);
                                                    setStarted(false);
                                                    setGameOver(true);
                                                    // store best
                                                    setBest((b) => {
                                                        const nb = Math.max(b, score);
                                                        localStorage.setItem('snakeBest', String(nb));
                                                        return nb;
                                                    });
                                } else {
                                    snake.unshift(head);
                                    // apple
                                    const apple = appleRef.current;
                                    if (head.x === apple.x && head.y === apple.y) {
                                        setScore((s) => s + 1);
                                        // place new apple not on snake
                                        let nx, ny;
                                        do {
                                            nx = Math.floor(Math.random() * grid);
                                            ny = Math.floor(Math.random() * 15);
                                        } while (snake.some((s) => s.x === nx && s.y === ny));
                                        appleRef.current = { x: nx, y: ny };
                                    } else {
                                        snake.pop();
                                    }
                                    snakeRef.current = snake;
                                }
                            }

                            // draw
                            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--background') || '#f5f7fa';
                            ctx.fillRect(0, 0, w, h);
                            // grid glow
                            ctx.strokeStyle = 'rgba(0,0,0,0.05)';
                            for (let x=0; x<=w; x+=20) { ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,h); ctx.stroke(); }
                            for (let y=0; y<=h; y+=20) { ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(w,y); ctx.stroke(); }
                            // apple
                            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--secondary') || '#4b86b4';
                            ctx.fillRect(appleRef.current.x*20+2, appleRef.current.y*20+2, 16, 16);
                            // snake
                            ctx.fillStyle = getComputedStyle(document.documentElement).getPropertyValue('--primary') || '#2a4d69';
                            snakeRef.current.forEach((s, i) => {
                                ctx.globalAlpha = Math.max(0.6, 1 - i*0.02);
                                ctx.fillRect(s.x*20+2, s.y*20+2, 16, 16);
                            });
                            ctx.globalAlpha = 1;
                            rafId = requestAnimationFrame(loop);
                        };
                        rafId = requestAnimationFrame(loop);
                        return () => cancelAnimationFrame(rafId);
                    }, [running]);

                                const handleStartPause = () => { if (!started) { setStarted(true); setGameOver(false); setRunning(true); } else { setRunning((r) => !r); } };
                    const handleRestart = () => { reset(); setGameOver(false); setStarted(true); setRunning(true); };

                                const onTouchStart = (e) => {
                                    const t = e.changedTouches[0];
                                    touchRef.current = { x: t.clientX, y: t.clientY };
                                };
                                const onTouchEnd = (e) => {
                                    if (!touchRef.current) return;
                                    const t = e.changedTouches[0];
                                    const dx = t.clientX - touchRef.current.x;
                                    const dy = t.clientY - touchRef.current.y;
                                    const adx = Math.abs(dx), ady = Math.abs(dy);
                                    const d = dirRef.current;
                                    if (Math.max(adx, ady) < 18) return; // small swipe threshold
                                    if (adx > ady) {
                                        if (dx > 0 && d.x === 0) dirRef.current = { x: 1, y: 0 };
                                        else if (dx < 0 && d.x === 0) dirRef.current = { x: -1, y: 0 };
                                    } else {
                                        if (dy > 0 && d.y === 0) dirRef.current = { x: 0, y: 1 };
                                        else if (dy < 0 && d.y === 0) dirRef.current = { x: 0, y: -1 };
                                    }
                                    touchRef.current = null;
                                };

                    return (
                                    <div className="game-hero" onTouchStart={onTouchStart} onTouchEnd={onTouchEnd}>
                                        <div className="game-scorebar">
                                            <span className="game-score">Score: {score}</span>
                                            <span className="game-best">Best: {best}</span>
                                        </div>
                                        <canvas ref={canvasRef} width="400" height="300" className="game-canvas" aria-label="Snake game area"></canvas>
                            <div className="game-controls">
                                            <button className="button downloadâ€‘btn" onClick={handleStartPause}>{started ? (running ? 'Pause' : 'Resume') : 'Play'}</button>
                                <button className="game-restart" onClick={handleRestart}>Restart</button>
                            </div>
                            <div className="game-help">Use arrow keys or WASD (or swipe) to move. Space toggles play/pause.</div>
                                        {!started && !gameOver && (
                                            <div className="game-overlay start">Press Space or Play to begin</div>
                                        )}
                                        {gameOver && (
                                            <div className="game-overlay">Game Over â€” Score {score}. Press Restart.</div>
                                        )}
                        </div>
                    );
                }

                // Interactive Web of Life â€” orbiting nodes linking to sections and CV
                function WebOfLife() {
                    const scrollTo = (id) => {
                        const el = document.getElementById(id);
                        if (el) el.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    };
                    return (
                        <div className="wol">
                            <div className="wol-center" aria-label="Center node">Diego</div>
                            <div className="orbit" style={{"--r":"120px","--dur":"32s","--dir":"normal"}}>
                                <button className="node" onClick={() => window.open('Diego_Resume.pdf','_blank')} title="RÃ©sumÃ© / CV">CV</button>
                                <button className="node" style={{"--a":"120deg"}} onClick={() => scrollTo('projects')} title="Projects">Projects</button>
                                <button className="node" style={{"--a":"240deg"}} onClick={() => scrollTo('contact')} title="Contact">Contact</button>
                            </div>
                            <div className="orbit" style={{"--r":"170px","--dur":"40s","--dir":"reverse"}}>
                                <button className="node" onClick={() => scrollTo('experience')} title="Experience">Experience</button>
                                <button className="node" style={{"--a":"180deg"}} onClick={() => scrollTo('skills')} title="Skills">Skills</button>
                            </div>
                            <div className="orbit ring" style={{"--r":"210px","--dur":"60s","--dir":"normal"}} aria-hidden="true"></div>
                        </div>
                    );
                }

                // The main App component. Assembles all sections and the navigation bar.
                function App() {
                        // Initialize dark mode from localStorage or system preference
                        const prefers = typeof window !== 'undefined' && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
                        const storedPref = typeof window !== 'undefined' ? window.localStorage.getItem('darkMode') : null;
                        const initialDark = storedPref === null ? prefers : storedPref === 'true';
                        const [darkMode, setDarkMode] = React.useState(initialDark);
                        React.useEffect(() => {
                            const root = document.documentElement; // <html>
                            if (darkMode) root.classList.add('dark-mode'); else root.classList.remove('dark-mode');
                            window.localStorage.setItem('darkMode', darkMode ? 'true' : 'false');
                        }, [darkMode]);
                        const toggleDarkMode = () => setDarkMode(d => !d);

                        // State for the chatbot open/closed status and chat messages
            const [chatOpen, setChatOpen] = React.useState(false);
            const [chatInput, setChatInput] = React.useState('');
            const [messages, setMessages] = React.useState([
                { from: 'bot', text: 'Hello! I\'m your personal assistant. How can I help you?' }
            ]);

                        // Resolve chat base for health checks and requests
                        const getChatBase = React.useCallback(() => {
                            const configured = (window.CHAT_API_BASE || '').trim();
                            return (configured || (location.hostname === 'localhost' ? 'http://localhost:8787' : '')).replace(/\/$/, '');
                        }, []);
                        const { healthy: chatHealthy, check: checkChatHealth } = useChatHealth(getChatBase);

            // Replace the ChatGPT helper with a Gemini helper. This function calls
            // Googleâ€™s Gemini generative API using the supplied API key. The API
            // key is embedded directly in the endpoint URL as required by the
            // Gemini REST specification. If the call fails, a fallback message is
            // returned. See Googleâ€™s documentation for additional detailsã€744721557993995â€ L420-L448ã€‘.
            async function getAIReply(message) {
                // Resolve API base: prefer configured base; fallback to localhost in dev.
                const configured = (window.CHAT_API_BASE || '').trim();
                const base = (configured || (location.hostname === 'localhost' ? 'http://localhost:8787' : '')).replace(/\/$/, '');
                if (!base) {
                    return 'Assistant is not configured yet.';
                }
                const url = `${base}/api/chat`;
                try {
                    const response = await fetch(url, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ message })
                    });
                    if (!response.ok) {
                        let detail = '';
                        try { detail = await response.text(); } catch {}
                        console.error('Proxy error:', detail || response.statusText);
                        // Show a short, actionable message to the user
                        return 'Assistant temporarily unavailable.';
                    }
                    const data = await response.json();
                    return (data.reply || 'Sorry, no response available.');
                } catch (error) {
                    console.error('Proxy call failed:', error);
                    return 'Network error contacting assistant.';
                }
            }

            // Handle sending a chat message. This helper is invoked when the user
            // presses Enter or clicks the Send button. It appends the userâ€™s
            // message to the chat, clears the input, calls getAIReply() and
            // appends the botâ€™s response.
            const handleChatSend = async () => {
                if (chatInput.trim() !== '') {
                    const input = chatInput.trim();
                    // Add the userâ€™s message to the log
                    setMessages(prev => [...prev, { from: 'user', text: input }]);
                    setChatInput('');
                    // Fetch AI reply
                    const reply = await getAIReply(input);
                    setMessages(prev => [...prev, { from: 'bot', text: reply }]);
                }
            };

            // Handle Enter key by delegating to handleChatSend()
            const handleChatKeyPress = (e) => {
                if (e.key === 'Enter') {
                    handleChatSend();
                }
            };

            return (
                <div>
                    <NavBar darkMode={darkMode} toggleDarkMode={toggleDarkMode} />
                    {/* Home section with a hero message */}
                    <Section id="home" title="">
                        <div className="hero hero-intro">
                            <h1 className="intro-name" aria-label="Diego Crisafulli">
                                <span className="intro-first">Diego</span>
                                <span className="intro-last">Crisafulli</span>
                            </h1>
                            <p className="intro-typing" aria-live="polite"><span id="typewriter"></span><span className="cursor">|</span></p>
                            <div className="intro-sub">
                                <p>Crafting cloudâ€‘native solutions, web experiences, and immersive simulations.</p>
                            </div>
                            <div className="intro-game">
                                <GameHero />
                            </div>
                            <div className="intro-cta">
                                <a href="Diego_Resume.pdf" className="button downloadâ€‘btn" download>Download Resume</a>
                            </div>
                        </div>
                    </Section>
                    {/* Web of Life section */}
                    <Section id="web-of-life" title="Web of Life">
                        <p style={{marginTop:0}}>Hover or tap nodes to explore my work and background.</p>
                        <WebOfLife />
                    </Section>
                    {/* About section describing Diegoâ€™s professional summary */}
                    <Section id="about" title="About">
                        <p>
                            I'm a multidisciplinary software engineer specializing in DevOps, fullâ€‘stack web development and
                            cloud automation. Over the past few years I've streamlined deployments, enhanced system
                            reliability and delivered AIâ€‘driven solutions. I'm passionate about leveraging cuttingâ€‘edge
                            technologies to solve complex problems and love tackling new challenges.
                        </p>
                    </Section>
                    {/* Skills section listing grouped skills */}
                    <Section id="skills" title="Skills">
                        <ul className="skillsâ€‘list">
                            <li><strong>Cloud & DevOps:</strong> Azure, AWS (EC2, S3, Lambda), GitHub Actions, CI/CD, Infrastructure as Code</li>
                            <li><strong>Programming & Web:</strong> JavaScript, TypeScript, PowerShell, Python, C++, HTML5, CSS3</li>
                            <li><strong>Databases:</strong> MongoDB, SQL</li>
                            <li><strong>AI & Automation:</strong> OpenAI API, Generative AI, Prompt Engineering, Test Automation</li>
                            <li><strong>3D & Simulation:</strong> Unreal Engine, NVIDIA Omniverse, VR/AR Development</li>
                            <li><strong>Tools:</strong> Git, GitHub Copilot, Docker, SCTP, TLS, DPDK/VPP</li>
                        </ul>
                    </Section>
                    {/* Experience section summarizing career roles */}
                    <Section id="experience" title="Experience">
                        <div className="experience">
                            <div className="job">
                                <h3>Software Engineer (DevOps) â€“ CAE</h3>
                                <span className="jobâ€‘date">MayÂ 2025Â â€“Â Present</span>
                                <ul>
                                    <li>Developed and maintained automation pipelines with Azure and GitHub Actions, boosting deployment efficiency by 30%.</li>
                                    <li>Partnered with crossâ€‘functional teams to optimize asset flow, reducing system downtime by 25%.</li>
                                    <li>Engineered cloud computing solutions using JavaScript and PowerShell, improving overall system reliability and scalability.</li>
                                </ul>
                            </div>
                            <div className="job">
                                <h3>IVR System Developer â€“ CAE</h3>
                                <span className="jobâ€‘date">SepÂ 2024Â â€“Â MayÂ 2025</span>
                                <ul>
                                    <li>Proposed continual improvements to IVR functionality and user experience, driving measurable gains in customer satisfaction.</li>
                                    <li>Developed and optimized automated test scripts (JavaScript, XML, JSON), boosting testing coverage and reducing defects.</li>
                                    <li>Analyzed test outcomes, identified root causes and collaborated with crossâ€‘functional teams to enhance system reliability.</li>
                                </ul>
                            </div>
                            <div className="job">
                                <h3>Software Engineer Intern â€“ CAE</h3>
                                <span className="jobâ€‘date">OctÂ 2023Â â€“Â SepÂ 2024</span>
                                <ul>
                                    <li>Contributed to the Ondulus IR team, developing and testing advanced simulation technologies including night vision, LiDAR and infrared systems.</li>
                                    <li>Led C++ sensor testing processes and optimized algorithms to automate testing workflows.</li>
                                    <li>Created comprehensive test cases to validate physicsâ€‘based simulation modules under diverse conditions.</li>
                                </ul>
                            </div>
                            <div className="job">
                                <h3>Simulation Developer â€“ Presagis</h3>
                                <span className="jobâ€‘date">JunÂ 2022Â â€“Â JunÂ 2023</span>
                                <ul>
                                    <li>Coded simulations using NVIDIA Omniverse IsaacÂ Sim, implementing machineâ€‘learning, pointâ€‘cloud and lidar technology for AI solutions.</li>
                                    <li>Integrated USD workflows into Velocity5D and created digital twins with 3D modelling, texturing and mapping.</li>
                                    <li>Collaborated with developers and 3D artists; utilized Python for automation and tool development.</li>
                                </ul>
                            </div>
                            <div className="job">
                                <h3>3D Artist/Developer â€“ Presagis</h3>
                                <span className="jobâ€‘date">SepÂ 2021Â â€“Â JunÂ 2022</span>
                                <ul>
                                    <li>Built a library of custom 3D models, textures and animations using UnrealÂ Engine, Omniverse and Blender.</li>
                                    <li>Employed Python scripting to streamline asset creation and optimize 3D workflows.</li>
                                    <li>Collaborated with crossâ€‘functional teams to deliver visually engaging simulation assets.</li>
                                </ul>
                            </div>
                        </div>
                    </Section>
                    {/* Projects section highlighting major projects */}
                    <Section id="projects" title="Projects">
                        <div className="projects">
                            <div className="project">
                                <h3>VR Brain Installation</h3>
                                <p>
                                    Lead VR/AI Developer working with McGill Universityâ€™s neuroscience team to translate authentic neural imaging data into an immersive VR experience. Built AIâ€‘powered pipelines and optimized 3D environments in UnrealÂ Engine for highâ€‘fidelity visualization.
                                </p>
                            </div>
                            <div className="project">
                                <h3>The Actual Informer</h3>
                                <p>
                                    Fullâ€‘stack news summarization web app built with TypeScript, Node.js and Express, deployed on AWS. Integrated OpenAIâ€™s API to rewrite and shorten articles, improving readability and engagement. Designed a responsive user interface with HTML5 and CSS3.
                                </p>
                            </div>
                        </div>
                        {/* Featured projects: highlight portfolio additions */}
                        <div className="featured-projects">
                            <div className="project-card">
                                <h3>Real-Time Dashboard</h3>
                                <p>
                                    A Python Dash application that streams and visualizes data in real time. Includes a data source selector
                                    and update-interval slider. View the code on
                                    {' '}
                                    <a href="https://github.com/diegocrisafu/realtime-dashboard" target="_blank" rel="noopener noreferrer">GitHub</a>.
                                </p>
                            </div>
                            <div className="project-card">
                                <h3>Expense Tracker</h3>
                                <p>
                                    A React-based expense tracker app with local persistence, deletion and a category pie chart. Open it directly
                                    via its <a href="https://diegocrisafu.github.io/expense/" target="_blank" rel="noopener noreferrer">live page</a> once
                                    GitHub Pages is enabled, or see the code on{' '}
                                    <a href="https://github.com/diegocrisafu/expense" target="_blank" rel="noopener noreferrer">GitHub</a>.
                                </p>
                            </div>
                        </div>
                    </Section>
                    {/* Education section listing academic background */}
                    <Section id="education" title="Education">
                        <div className="education">
                            <div className="school">
                                <h3>Concordia University</h3>
                                <span className="schoolâ€‘date">2022Â â€“Â Present</span>
                                <p>Double Major in Computational Design & Computer Science. Engaged in projects spanning 3D graphics, highâ€‘performance computing and AI development.</p>
                            </div>
                            <div className="school">
                                <h3>Marianopolis College</h3>
                                <span className="schoolâ€‘date">2020Â â€“Â 2022</span>
                                <p>DEC in Commerce. Strengthened critical thinking and methodology skills with a focus on business and information systems.</p>
                            </div>
                        </div>
                    </Section>
                    {/* Contact section with simple contact info and callâ€‘toâ€‘action */}
                    <Section id="contact" title="Contact">
                        <p>
                            Feel free to reach out via email at <a href="mailto:diego.crisafu@gmail.com">diego.crisafu@gmail.com</a> or connect with me on <a href="https://www.linkedin.com/in/diegocrisafulli212bb0256" target="_blank" rel="noopener noreferrer">LinkedIn</a>.
                        </p>
                    </Section>
                    <footer className="footer">Â© {new Date().getFullYear()} Diego Crisafulli</footer>
                    {/* Floating chatbot component */}
                    <div className="chatbot-container">
                        {/* Chat icon toggles the chat window on click */}
                        <div
                            className="chat-icon"
                            role="button"
                            aria-label={chatOpen ? 'Close chat' : 'Open chat'}
                            tabIndex="0"
                            onClick={() => setChatOpen(!chatOpen)}
                        >
                            ðŸ’¬
                        </div>
                        {chatOpen && (
                            <div className="chat-window">
                                {/* Header with title, close and clear buttons */}
                                                                <div className="chat-window-header">
                                                                        <h4>
                                                                            <span className={`chat-status-dot ${chatHealthy ? 'online' : 'offline'}`} title={chatHealthy ? 'Online' : 'Offline'}></span>
                                                                            Assistant
                                                                        </h4>
                                    <div className="chat-window-controls">
                                        <button
                                            className="chat-clear-btn"
                                            aria-label="Clear conversation"
                                            onClick={() =>
                                                setMessages([
                                                    {
                                                        from: 'bot',
                                                        text: "Hello! I'm your personal assistant. How can I help you?",
                                                    },
                                                ])
                                            }
                                        >
                                            Clear
                                        </button>
                                                                                <button className="chat-clear-btn" onClick={() => checkChatHealth()} aria-label="Retry health check">Check</button>
                                        <button
                                            className="chat-close-btn"
                                            aria-label="Close chat window"
                                            onClick={() => setChatOpen(false)}
                                        >
                                            \u00d7
                                        </button>
                                    </div>
                                </div>
                                <div className="chat-messages">
                                    {messages.map((msg, idx) => (
                                        <div key={idx} className={`chat-message ${msg.from}`}>{msg.text}</div>
                                    ))}
                                </div>
                                {/* Input area with send button */}
                                <div className="chat-input-container">
                                    <input
                                        type="text"
                                        className="chat-input"
                                        placeholder="Type a message..."
                                        value={chatInput}
                                        onChange={(e) => setChatInput(e.target.value)}
                                        onKeyPress={handleChatKeyPress}
                                    />
                                    <button className="chat-send-btn" onClick={handleChatSend}>Send</button>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

                // Chat health util inside App scope
                function useChatHealth(getBase) {
                    const [healthy, setHealthy] = React.useState(false);
                    const check = React.useCallback(async () => {
                        try {
                            const base = getBase();
                            if (!base) { setHealthy(false); return false; }
                            // try /health (node) first, then root (worker)
                            let ok = false;
                            try {
                                const r1 = await fetch(`${base}/health`, { method: 'GET' });
                                ok = r1.ok;
                                if (!ok) throw new Error('health not ok');
                            } catch {
                                const r2 = await fetch(base, { method: 'GET' });
                                ok = r2.ok;
                            }
                            setHealthy(!!ok);
                            return ok;
                        } catch {
                            setHealthy(false);
                            return false;
                        }
                    }, [getBase]);
                    // poll every 30s
                    React.useEffect(() => {
                        check();
                        const id = setInterval(check, 30000);
                        return () => clearInterval(id);
                    }, [check]);
                    return { healthy, check };
                }

                // Render the App component into the root div
        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
        <script>
            // Lightweight typewriter for the intro subtitle
            (function(){
                const phrases = [
                    'Software & ML Engineer',
                    'Cloudâ€‘native builder',
                    'Fullâ€‘stack developer'
                ];
                let i = 0, j = 0, erasing = false;
                const el = () => document.getElementById('typewriter');
                function tick(){
                    const target = el(); if(!target) return;
                    const p = phrases[i % phrases.length];
                    if(!erasing){ j++; target.textContent = p.slice(0, j); if(j >= p.length){ erasing = true; setTimeout(tick, 1200); return; } }
                    else { j--; target.textContent = p.slice(0, j); if(j <= 0){ erasing = false; i++; } }
                    setTimeout(tick, erasing ? 40 : 70);
                }
                window.addEventListener('DOMContentLoaded', () => setTimeout(tick, 400));
            })();
        </script>
    
</body>
</html>